Demo ES5 getter/setter based observer implementation.
Learn more about getter/setters and Object.defineProperty:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty

<div id="count"></div>
<button onclick="state.count++">++</button>

<script>

// fileA.js
let currentEffect

class Dep {
  constructor() {
    this.subscribers = new Set()
  }

  depend() {
    if (currentEffect) {
      this.subscribers.add(currentEffect)
    }
  }

  notify() {
    this.subscribers.forEach(sub => {
      sub()
    })
  }
}

function effect(runner) {
  currentEffect = runner
  runner()
  currentEffect = null
}

// ---

function observable(obj) {
  Object.keys(obj).forEach(key => {
    let value = observable(obj[key])
    const dep = new Dep()

    Object.defineProperty(obj, key, {
      get() {
        dep.depend()
        return value
      },
      set(newValue) {
        value = newValue
        dep.notify()
      }
    })
  })

  return obj
}

// property additions / deletions
// array index / length mutations
// Map / Set...

const state = observable({
  count: 0
})

effect(() => {
  document.getElementById('count').textContent = state.count
})

state.count++
</script>
